<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>YAML schema structure</title>

<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>






<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">YAML schema structure</h1>



<style type="text/css">
pre {
  font-size: 10px
}
</style>
<p>In order to generate fake data you need to provide schema description in yaml format. The structure of the configuration file relects the structure of relational database. Such structure allows the package to detect inner and inter-table dependencies, more to that, makes the simulated data preserving original database assumptions.</p>
<p>The schema can be automatically sourced from a database (see: <a href="./structure_from_db.html">Structure from DB</a>) or you may configure such on your own.</p>
Such configuration file should have the below structure:
<pre>
public                                                       - schema name
└── tables:                                                  - tables list
    ├── table_a:                                             - name of the table
    │   ├── ...                                              - additional <a href="simulation_options.html#default-table-parameters">table-wise parameters</a>
    │   ├── check_constraints:                               - list of table check constraints
    │   │   └── constraint_name                              - unique name of the constraint 
    │   │       ├── column: column_a2                        - column attached to the constraint (can be empty)
    │   │       └── expression: !expr column_a2 == column_a1 - R expression describing constraint
    │   ├── columns:                                         - list of table columns
    │   │   ├── column_a1:                                   - name of the column
    │   │   │   ├── type: char(8)                            - column type (obligatory, valid R class or sql type)
    │   │   │   ├── not_null: true                           |
    │   │   │   ├── unique: true                             | standard <a href="simulation_options.html#default-column-type-parameters">column parameters</a> (optional)
    │   │   │   └── ...                                      - <a href="extra_parameters.html">extra</a> column parameters
    │   │   └── column_a2:
    │   │       └── type: numeric(4, 2)
    │   └── primary_key:                                     - list of primary keys
    │       └── pk_name:                                     - primary key unique name
    │           └── columns:                                 - array of primary key columns
    │               └── - column_a1                          - column name treated as primary key
    └── table_b:
        ├── columns:
        │   ├── column_b1:
        │   │   └── type: char(8)
        │   └── column_b2:
        │       └── type: boolean
        └── foreign_keys:                                    - list of foreign keys
            └── fk_name:                                     - unique foreign key name
                ├── columns:                                 - array of foreign key columns
                │   └── - column_b1                          - name of the table column beeing foreign key
                └── references:                              - definition of foregin key reference
                    ├── columns:                             - array of foreign key dependent columns
                    │   └── - column_a1                      - name of dependent column
                    └── table: table_a                       - name of dependent foreign key table
</pre>
<p>Schema assumptions and limitations (possibly reduced in the future releases):</p>
<ul>
<li>Only single column supported for each primary key. That means for each primary key name, <code>pk_name &gt; columns</code> list must contain only a single column.</li>
<li>Only single column supported for each foreign key. That is, each foreign key name, <code>fk_name &gt; columns</code> and <code>fk_name &gt; references &gt; columns</code> lists must contain only a single value.</li>
<li>Check constraints expression must be a valid R expression. In the future releases automatic convertion will be added.</li>
</ul>
<!-- todo add working example here -->



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
